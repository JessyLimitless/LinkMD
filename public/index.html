<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <title>LinkMD — MD Knowledge Archive</title>
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/cards.css">
  <link rel="stylesheet" href="css/search.css">
  <link rel="stylesheet" href="css/viewer.css">
  <link rel="stylesheet" href="css/export.css">
  <link rel="stylesheet" href="css/share.css">
  <link rel="stylesheet" href="css/animations.css">
  <link rel="stylesheet" href="css/tree-view.css?v=8">
  <link rel="stylesheet" href="css/universe.css?v=3">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
  <script src="https://unpkg.com/3d-force-graph"></script>
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <button class="hamburger-btn" id="hamburger-btn" onclick="toggleSidebarMobile()" aria-label="메뉴">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
      </button>
      <div class="header-logo" onclick="toggleSidebar()">
        <span class="logo-icon"><i data-lucide="link" style="width:20px;height:20px"></i></span> LinkMD
      </div>
      <div class="header-search">
        <span class="search-icon"><i data-lucide="search" style="width:16px;height:16px"></i></span>
        <input id="search-input" type="text" placeholder="전체 검색...">
        <span class="search-kbd"><kbd class="kbd">Ctrl</kbd><kbd class="kbd">K</kbd></span>
      </div>
      <div class="header-actions">
        <button class="btn btn-primary btn-sm" onclick="openExport()" id="export-btn"><i data-lucide="download" style="width:14px;height:14px"></i> 내보내기</button>
      </div>
    </header>

    <!-- Content -->
    <div class="content">
      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-section" style="padding-bottom:0">
          <div class="sidebar-item universe-menu" onclick="openUniverse()">
            <i data-lucide="orbit"></i> Universe
          </div>
        </div>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Projects</div>
          <div id="project-list"></div>
          <button class="sidebar-add-btn" onclick="showCreateProjectModal()"><i data-lucide="plus" style="width:14px;height:14px"></i> 새 프로젝트</button>
        </div>

        <div class="sidebar-section" id="tree-section">
          <div class="sidebar-section-title" style="display:flex;justify-content:space-between;align-items:center">
            <span>Explorer</span>
            <div class="tree-view-header-actions" id="tree-header-actions" style="display:none">
              <button onclick="showCreateDocModal(null)" title="새 파일"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><path d="M14 2v6h6"/><line x1="12" y1="18" x2="12" y2="12"/><line x1="9" y1="15" x2="15" y2="15"/></svg></button>
              <button onclick="showCreateFolderModal(null)" title="새 폴더"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/><line x1="12" y1="11" x2="12" y2="17"/><line x1="9" y1="14" x2="15" y2="14"/></svg></button>
            </div>
          </div>
          <div class="tree-view-container" id="tree-view">
            <div style="padding:8px;color:var(--gray-400);font-size:0.8rem">프로젝트를 선택하세요</div>
          </div>
        </div>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Tags</div>
          <div id="tag-list"></div>
        </div>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Recent Searches</div>
          <div id="search-history-list" class="search-history"></div>
        </div>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Stats</div>
          <div id="stats-section"></div>
        </div>
      </aside>
      <div class="sidebar-backdrop" id="sidebar-backdrop" onclick="closeSidebarMobile()"></div>

      <!-- Main -->
      <main class="main" id="main"></main>
    </div>
  </div>

  <!-- Export Panel -->
  <div class="export-overlay" id="export-overlay" onclick="closeExport()"></div>
  <div class="export-panel" id="export-panel">
    <div class="export-panel-header">
      <h2><i data-lucide="download" style="width:18px;height:18px"></i> 내보내기</h2>
      <button class="export-panel-close" onclick="closeExport()">&times;</button>
    </div>
    <div class="export-form">
      <div class="export-field">
        <label>출력 형식</label>
        <select id="export-format">
          <option value="docx">Word (DOCX)</option>
          <option value="pdf">PDF</option>
          <option value="html">HTML</option>
        </select>
      </div>
      <div class="export-field">
        <label>스타일 템플릿</label>
        <select id="export-template">
          <option value="business-report">비즈니스 보고서</option>
          <option value="technical-doc">기술 문서</option>
          <option value="simple-clean">심플</option>
          <option value="government-report">공공기관 보고서</option>
        </select>
      </div>
      <div class="export-field">
        <label>문서 제목</label>
        <input id="export-title" placeholder="제목">
      </div>
      <div class="export-field">
        <label style="display:flex;align-items:center;gap:6px">
          <input type="checkbox" id="export-toc" checked> 목차 포함
        </label>
      </div>
      <div class="export-submit">
        <button class="btn btn-secondary" onclick="closeExport()">취소</button>
        <button class="btn btn-primary" onclick="doExport()">변환 시작</button>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" id="modal-overlay" onclick="event.target===this&&closeModal()"></div>

  <!-- Toast -->
  <div class="toast-container" id="toast-container"></div>

  <!-- Scripts -->
  <script src="js/app-state.js?v=8"></script>
  <script src="js/app.js?v=8"></script>
  <script src="js/projects.js?v=8"></script>
  <script src="js/upload.js?v=8"></script>
  <script src="js/cards.js?v=8"></script>
  <script src="js/search.js?v=8"></script>
  <script src="js/viewer.js?v=8"></script>
  <script src="js/tags.js?v=8"></script>
  <script src="js/share.js?v=8"></script>
  <script src="js/export.js?v=8"></script>
  <script src="js/sidebar.js?v=8"></script>
  <script src="js/tree-view.js?v=8"></script>
  <script src="js/context-menu.js?v=8"></script>
  <script src="js/editor.js?v=8"></script>
  <script src="js/folder-crud.js?v=8"></script>
  <script src="js/split-doc.js?v=1"></script>
  <script src="js/auto-tag.js?v=1"></script>
  <script src="js/graph-builder.js?v=1"></script>
  <script src="js/universe.js?v=3"></script>
</body>
</html>
